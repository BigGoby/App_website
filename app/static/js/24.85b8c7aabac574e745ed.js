webpackJsonp([24],{"4V1Y":function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=a("mtWM"),o=a.n(e),i={name:"forgotpassword",data:function(){return{userFlag:!1,passwordFlag:!1,smsState:!1,btnValue:"获取验证码",isSubmit:!0}},components:{toast:a("8DN1").a},methods:{handleBackClick:function(){this.$router.go(-1)},handleGetCode:function(t){/^1[3587]\d{9}$/.test(t)?(this.userFlag=!0,o.a.post("/user/register/send/sms/",{username:t}).then(this.handleGetCodeSucc.bind(this)).catch(this.handleGetCodeErr.bind(this))):this.handleInputCheck()},handleGetCodeSucc:function(){var t=this;this.isSubmit=!1;var s=60;this.timer=setInterval(function(){s--,t.btnValue=s+"秒后获取",0===s&&(clearInterval(t.timer),t.isSubmit=!0,t.btnValue="请获取验证码")},1e3),this.smsState=!0},handleInputCheck:function(){this.$refs.toast.toastShow("请输入正确的手机号")},handleGetCodeErr:function(){this.$refs.toast.toastShow("获取验证码失败")},handleSubmitClick:function(t,s,a){""===t?this.$refs.toast.toastShow("用户名不能为空"):""===s?this.$refs.toast.toastShow("请获取输入验证码"):""===a?this.$refs.toast.toastShow("请输入新密码"):/^[a-zA-Z0-9]{8,16}$/.test(a)?this.passwordFlag=!0:this.$refs.toast.toastShow("密码必须是8-16位字母和数字"),this.userFlag&&this.passwordFlag&&s&&this.smsState&&o.a.post("/user/mpw/",{username:t,verification:s,password:a}).then(this.handleResetPassworSucc.bind(this)).catch(this.handleResetPassworErr.bind(this))},handleResetPassworSucc:function(t){var s=this;1===t.data.data.state||"1"===t.data.data.state?(this.$refs.toast.toastShow("重置密码成功,3s后跳到登录页"),setTimeout(function(){s.$router.push("/login")},3e3)):this.$refs.toast.toastShow("验证码错误")},handleResetPassworErr:function(){this.$refs.toast.toastShow("重置密码失败")}}},r={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[a("div",{staticClass:"title border-bottom"},[a("span",{staticClass:"iconfont icon",on:{touchstart:t.handleBackClick}},[t._v("")]),t._v("忘记密码\n  ")]),t._v(" "),a("div",{staticClass:"main"},[a("label",{staticClass:"forgotpassword-container verification-container"},[a("div",{staticClass:"verification inputCode border-bottom"},[a("input",{ref:"username",staticClass:"forgotpassword-input",attrs:{type:"text",placeholder:"请输入手机号"}})]),t._v(" "),a("input",{staticClass:"verification getVerification",attrs:{type:"button",value:t.btnValue},on:{click:function(s){t.handleGetCode(t.$refs.username.value)}}})]),t._v(" "),a("label",{staticClass:"forgotpassword-container border-bottom"},[a("input",{ref:"verification",staticClass:"forgotpassword-input",attrs:{type:"text",placeholder:"请输入验证码"}})]),t._v(" "),a("label",{staticClass:"forgotpassword-container border-bottom"},[a("input",{ref:"password",staticClass:"forgotpassword-input",attrs:{type:"password",placeholder:"请输入新密码"}})]),t._v(" "),a("label",{staticClass:"forgotpassword-container resetpassword-submit border"},[a("input",{staticClass:"submit",attrs:{type:"button",value:"重置密码"},on:{click:function(s){t.handleSubmitClick(t.$refs.username.value,t.$refs.verification.value,t.$refs.password.value)}}})])]),t._v(" "),a("toast",{ref:"toast"})],1)},staticRenderFns:[]},n=a("VU/8")(i,r,!1,function(t){a("hCER")},"data-v-021b7b14",null);s.default=n.exports},hCER:function(t,s){}});
//# sourceMappingURL=24.85b8c7aabac574e745ed.js.map