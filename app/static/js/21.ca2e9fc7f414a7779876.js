webpackJsonp([21],{pcV9:function(e,a){},z2k5:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var l=t("8DN1"),s=t("mtWM"),i=t.n(s),n={name:"publish",components:{toast:l.a},data:function(){return{uploadImg:"",imageUrl:"",file:"",inputVal:"",textareaVal:"",spend:"",style:"",area:"",type:"",fileVal:"上传图片",spendOptions:[{value:"装修花费",label:"装修花费",disabled:!0},{value:"1-5",label:"1万-5万"},{value:"5-10",label:"5万-10万"},{value:"10-20",label:"10万-20万"},{value:"20-50",label:"20万-50万"},{value:"50或跟多",label:"50万以上"}],areaOptions:[{value:"房屋面积",label:"房屋面积",disabled:!0},{value:"50-80",label:"50-80平米"},{value:"80-100",label:"80-100平米"},{value:"100-200",label:"100-200平米"},{value:"200以上",label:"200以上平米"}],styleOptions:[{value:"房屋样式",label:"房屋样式",disabled:!0},{value:"欧式",label:"欧式"},{value:"美式",label:"美式"},{value:"中式",label:"中式"},{value:"简约",label:"简约"},{value:"田园",label:"田园"},{value:"混搭",label:"混搭"},{value:"其它",label:"其它"}],typeOptions:[{value:"房屋类型",label:"房屋类型",disabled:!0},{value:"一居室",label:"一居室"},{value:"二居室",label:"二居室"},{value:"三居室",label:"三居室"},{value:"别墅",label:"别墅"},{value:"其它",label:"其它"}]}},methods:{handleSubmitClick:function(){if(this.style&&this.type&&this.area&&this.spend)if(""===this.textareaVal)this.$refs.toast.toastShow("请输入内容");else if(""===this.inputVal)this.$refs.toast.toastShow("请输入标题");else if("image/jpeg"!==this.file.type)this.$refs.toast.toastShow("暂不支持此文件类型");else{var e=new FormData;e.append("title",this.inputVal),e.append("content",this.textareaVal),e.append("img",this.file),e.append("style",this.style),e.append("type",this.type),e.append("area",this.area),e.append("spend",this.spend),i.a.post("/add/diary/",e).then(this.handleSubmitSucc.bind(this)).catch(this.handleSubmitErr.bind(this))}else this.$refs.toast.toastShow("请选择您的房屋信息")},handleSubmitSucc:function(e){var a=this,t=0;e.data&&(e=e.data),e.data&&(t=e.data.state),1===t||"1"===t?(this.$refs.toast.toastShow("发布成功"),setTimeout(function(){a.$router.go(-1)},2e3)):this.$refs.toast.toastShow("发布失败")},handleSubmitErr:function(){this.$refs.toast.toastShow("返回信息错误")},handleInputChange:function(){var e=this;if(this.$refs.file.files[0]&&(this.file=this.$refs.file.files[0]),this.fileVal=this.file.name,"undefined"!=typeof FileReader){var a=new FileReader;a.readAsDataURL(this.file),a.onload=function(a){e.uploadImg=a.target.result}}}}},o={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"container"},[t("div",{staticClass:"header border-bottom"},[t("router-link",{staticClass:"back iconfont",attrs:{to:"/my"}},[e._v("")]),e._v("\n    写日记\n  ")],1),e._v(" "),t("div",{staticClass:"diray"},[t("el-select",{attrs:{clearable:"",placeholder:"装修花费"},model:{value:e.spend,callback:function(a){e.spend=a},expression:"spend"}},e._l(e.spendOptions,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),e._v(" "),t("el-select",{attrs:{clearable:"",placeholder:"房屋面积"},model:{value:e.area,callback:function(a){e.area=a},expression:"area"}},e._l(e.areaOptions,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),e._v(" "),t("el-select",{attrs:{clearable:"",placeholder:"房屋类型"},model:{value:e.type,callback:function(a){e.type=a},expression:"type"}},e._l(e.typeOptions,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),e._v(" "),t("el-select",{attrs:{clearable:"",placeholder:"房屋样式"},model:{value:e.style,callback:function(a){e.style=a},expression:"style"}},e._l(e.styleOptions,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.inputVal,expression:"inputVal"}],staticClass:"title-input",attrs:{type:"text",placeholder:"请填写标题"},domProps:{value:e.inputVal},on:{input:function(a){a.target.composing||(e.inputVal=a.target.value)}}}),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.textareaVal,expression:"textareaVal"}],staticClass:"input",attrs:{placeholder:"装修小日记"},domProps:{value:e.textareaVal},on:{input:function(a){a.target.composing||(e.textareaVal=a.target.value)}}}),e._v(" "),t("div",{staticClass:"upload-img-con"},[t("img",{ref:"uploadImg",staticClass:"upload-img",attrs:{src:e.uploadImg,alt:""}})]),e._v(" "),t("div",{staticClass:"file-con"},[t("div",{staticClass:"upfile"},[e._v(e._s(e.fileVal))]),e._v(" "),t("input",{ref:"file",staticClass:"file",attrs:{title:"上传图片",type:"file"},on:{change:e.handleInputChange}})]),e._v(" "),t("div",{staticClass:"publish",on:{click:e.handleSubmitClick}},[e._v("提交")])],1),e._v(" "),t("toast",{ref:"toast"})],1)},staticRenderFns:[]},r=t("VU/8")(n,o,!1,function(e){t("pcV9")},"data-v-25030695",null);a.default=r.exports}});
//# sourceMappingURL=21.ca2e9fc7f414a7779876.js.map